<app-header></app-header>
<app-navbar></app-navbar>

<main class="app-main">
  <div class="content-wrapper">
    <div class="health-check">
      <h2>Estado del Backend</h2>
      <button (click)="checkHealth()" [disabled]="loading" class="btn-primary">
        {{ loading ? 'Verificando...' : 'Verificar Conexi√≥n' }}
      </button>

      <div *ngIf="healthStatus" class="status success">
        <p><strong>Estado:</strong> {{ healthStatus.status }}</p>
        <p><strong>Mensaje:</strong> {{ healthStatus.message }}</p>
      </div>

      <div *ngIf="error" class="status error">
        <p><strong>Error:</strong> {{ error }}</p>
        <p>Verifica que el backend est√© corriendo en: {{ apiUrl }}</p>
      </div>
    </div>

    <div class="contenidos-medicos">
      <h2>üìö Contenidos M√©dicos</h2>
      <button (click)="cargarContenidos()" [disabled]="loadingContenidos" class="btn-secondary">
        {{ loadingContenidos ? 'Cargando...' : 'Recargar Contenidos' }}
      </button>

      <div *ngIf="loadingContenidos" class="status info">
        <p>Cargando contenidos m√©dicos...</p>
      </div>

      <div *ngIf="errorContenidos" class="status error">
        <p><strong>Error:</strong> {{ errorContenidos }}</p>
      </div>

      <div *ngIf="!loadingContenidos && contenidos.length > 0" class="contenidos-grid">
        <div *ngFor="let contenido of contenidos" class="contenido-card">
          <h3>{{ contenido.titulo || 'Sin t√≠tulo' }}</h3>
          <span *ngIf="contenido.categoria" class="badge">{{ contenido.categoria }}</span>
          <p *ngIf="contenido.descripcion" class="descripcion">{{ contenido.descripcion }}</p>
          <p *ngIf="contenido.contenido" class="contenido">{{ getContenidoPreview(contenido.contenido) }}</p>
          <p *ngIf="contenido.tipo" class="tipo"><small>Tipo: {{ contenido.tipo }}</small></p>
        </div>
      </div>

      <div *ngIf="!loadingContenidos && !errorContenidos && contenidos.length === 0" class="status info">
        <p>No hay contenidos disponibles</p>
      </div>
    </div>
  </div>
</main>

<app-footer></app-footer>
